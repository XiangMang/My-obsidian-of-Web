## å®éªŒä»‹ç»

æ¬¢è¿æ¥åˆ°æœ¬ç« èŠ‚ï½

![å›¾ç‰‡æè¿°](https://static.shiyanlou.com/lanqiao/frontend/dist/img/kiss.3eb189b.png)

æœ¬èŠ‚å®éªŒæˆ‘ä»¬è¿›å…¥è·¯ç”±çš„å­¦ä¹ ã€‚

ä¸æ»¡è¶³æ˜¯å‘ä¸Šçš„è½¦è½®ï¼Œè®©æˆ‘ä»¬åŠ è¶³é©¬åŠ›å¼€å§‹å‡ºå‘å§ï½ ğŸš—

#### çŸ¥è¯†ç‚¹

- å‰ç«¯è·¯ç”±çš„æ¦‚å¿µåŠä½œç”¨
- Vue-Router çš„å®‰è£…
- Vue-Router çš„åŸºæœ¬ä½¿ç”¨

## å‰ç«¯è·¯ç”±çš„æ¦‚å¿µåŠä½œç”¨

éœ€è¦å¤§å®¶æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œçš„è·¯ç”±å¯ä¸æ˜¯æŒ‡æˆ‘ä»¬æ—¥å¸¸ç”Ÿæ´»ä¸­çš„è·¯ç”±å™¨ ğŸ˜‚ ï¼Œä½†æ˜¯å…¶å®ç°åŸç†åŸºæœ¬ç›¸åŒã€‚å®ƒä»£è¡¨ä¸€ä¸ª URL ä¸ç›¸åº”å¤„ç†ç¨‹åºçš„æ˜ å°„å…³ç³»ã€‚

ç”¨æˆ·åœ¨è¾“å…¥è¦è®¿é—®çš„ URL ä¹‹åï¼Œè·¯ç”±ä¼šè§£æ URL ä¸­çš„è·¯å¾„ï¼Œä¹‹åæ ¹æ®æ˜ å°„è¡¨ä¸­çš„æ˜ å°„å…³ç³»æŸ¥æ‰¾ç›¸åº”çš„é¢„è®¾å‡½æ•°ï¼Œå¹¶å°†ç»“æœè¿”å›ç»™ç”¨æˆ·ï¼Œä»¥æ­¤å®Œæˆä¸€æ¬¡æ“ä½œã€‚

å…¶å·¥ä½œæµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1723100-20211109-1636427844206)

ä»¥ä¸Šå›¾ä¸ºä¾‹ï¼Œå½“ä¸€ä¸ªç”¨æˆ·ä½¿ç”¨ `https://www.lanqiao.cn/a` æ¥è®¿é—®ç½‘é¡µæ—¶ï¼ŒWeb æœåŠ¡ä¼šæ¥æ”¶åˆ°è¿™ä¸ªè¯·æ±‚ï¼Œç„¶åè§£æ URL ä¸­çš„è·¯å¾„ `/a`ï¼Œåœ¨ Web æœåŠ¡ç¨‹åºä¸­è¯¥è·¯å¾„å¯¹åº”ç€å“åº”çš„å¤„ç†é€»è¾‘ï¼Œç¨‹åºä¼šæŠŠè¯·æ±‚äº¤ç»™è·¯å¾„æ‰€å¯¹åº”çš„å¤„ç†é€»è¾‘ï¼Œè¿™æ ·å°±å®Œæˆäº†ä¸€æ¬¡â€œè·¯ç”±åˆ†å‘â€ï¼Œè¿™ä¸ªåˆ†å‘å°±æ˜¯é€šè¿‡â€œè·¯ç”±â€æ¥å®Œæˆçš„ã€‚

ç®€å•åœ°è¯´ï¼Œè·¯ç”±æ‰€åšçš„å·¥ä½œå°±æ˜¯ï¼šæ ¹æ®ä¸åŒçš„ URL åœ°å€å±•ç¤ºä¸åŒçš„å†…å®¹æˆ–é¡µé¢ã€‚

å‰ç«¯è·¯ç”±ä¸åŒäºä¼ ç»Ÿè·¯ç”±ï¼Œå®ƒä¸éœ€è¦æœåŠ¡å™¨æ¥è¿›è¡Œè§£æï¼Œè€Œæ˜¯é€šè¿‡ä¸€ä¸ª hash å‡½æ•°æˆ–è€… H5 æä¾›çš„ history API æ¥å®ç°ã€‚ä¸€èˆ¬ä½¿ç”¨å‰ç«¯è·¯ç”±çš„åº”ç”¨ä¸ºä¸æ¶‰åŠåˆ°é¡µé¢é—´è·³è½¬çš„å•é¡µé¢åº”ç”¨ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å½“ä¸‹æ­£åœ¨å­¦ä¹ çš„ã€‚ğŸ˜„

> å…³äºå‰ç«¯è·¯ç”±çš„ hash å’Œ history ä¸¤ç§æ¨¡å¼çš„å®ç°ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥é€šè¿‡è¿™ç¯‡ã€Š[å‰ç«¯è·¯ç”±å®ç°æ–¹æ³•](https://labfile.oss.aliyuncs.com/courses/5428/å‰ç«¯è·¯ç”±å®ç°æ–¹æ³•.pdf)ã€‹æ–‡ç« å»äº†è§£ã€‚

#### å‰ç«¯è·¯ç”±çš„ä¼˜ç¼ºç‚¹

å‰ç«¯è·¯ç”±çš„ä¼˜ç‚¹å¦‚ä¸‹ï¼š

1. **é¡µé¢åˆ·æ–°é€Ÿåº¦å¿«**ï¼šç”±äºä¸éœ€è¦å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œæ‰€ä»¥è¿™ä¸ªè¿‡ç¨‹ä¸ä¼šå—åˆ°ç½‘ç»œå»¶è¿Ÿçš„å½±å“ï¼Œå®é™…ä¸Šåªæ˜¯å®Œæˆéƒ¨åˆ†ç»„ä»¶é—´çš„åˆ‡æ¢ï¼Œå› æ­¤é¡µé¢çš„åˆ·æ–°é€Ÿåº¦ä¼šæ¯”è¾ƒå¿«ï¼Œç”¨æˆ·ä½“éªŒä¹Ÿæ›´å¥½äº›ã€‚
2. **å¤ç”¨æ€§å¼º**ï¼šç”±äºä½¿ç”¨å‰ç«¯è·¯ç”±çš„åº”ç”¨ä¸ºå•é¡µé¢åº”ç”¨ï¼Œæ‰€ä»¥ä»£ç ä¸­å¾ˆå¤š CSSã€JS éƒ½å¯ä»¥å…±ç”¨ï¼Œé¿å…äº†è¿‡å¤šçš„é‡å¤åŠ è½½ï¼Œå¤§å¤§æå‡äº†æ€§èƒ½ã€‚
3. **é¡µé¢çŠ¶æ€å¯è®°å½•**ï¼šå¦‚æœä¸ä½¿ç”¨å‰ç«¯è·¯ç”±ï¼Œä»…é€šè¿‡ Ajax åœ¨é¡µé¢è¿›è¡Œå±€éƒ¨åˆ‡æ¢çš„åº”ç”¨ï¼Œç”±äºé¡µé¢ URL å§‹ç»ˆä¿æŒä¸å˜ï¼Œå› æ­¤é¡µé¢çš„çŠ¶æ€æ˜¯æ— æ³•è®°å½•çš„ï¼Œè€Œå‰ç«¯è·¯ç”±å¾ˆå¥½çš„è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨äº†å‰ç«¯è·¯ç”±çš„åº”ç”¨ä¸­è®¿é—® `https://www.lanqiao.cn/a` è¿™ä¸ªé“¾æ¥ï¼Œå†æ‰“å¼€åä¼šç›´æ¥è§¦å‘ `/a` åŒ¹é…çš„è·¯ç”±é¡µé¢ä¸­çš„äº‹ä»¶ã€‚

å½“ç„¶ï¼Œå‰ç«¯è·¯ç”±ä¹Ÿæœ‰ä¸€äº›ç¼ºç‚¹ï¼Œæ¯”å¦‚ä½¿ç”¨æµè§ˆå™¨çš„å‰è¿›ã€åé€€é”®çš„æ—¶å€™ï¼Œä¼šé‡æ–°å‘é€è¯·æ±‚ï¼Œæ²¡æœ‰åˆç†åœ°åˆ©ç”¨ç¼“å­˜ã€‚

äº†è§£äº†å‰ç«¯è·¯ç”±çš„æ¦‚å¿µåŠåŸç†ï¼Œä¸€èµ·æ¥çœ‹çœ‹ä»Šå¤©è¦å­¦ä¹ çš„å‰ç«¯è·¯ç”±â€”â€”[Vue-Router](https://next.router.vuejs.org/zh/introduction.html)ã€‚

## Vue-Router çš„å®‰è£…

Vue-Router æ˜¯ Vue çš„å®˜æ–¹è·¯ç”±ï¼Œä¸“é—¨ä¸º Vue çš„å•é¡µé¢åº”ç”¨é‡èº«æ‰“é€ ã€‚

å…¶åŠŸèƒ½åŒ…æ‹¬ï¼š

- åµŒå¥—è·¯ç”±æ˜ å°„
- åŠ¨æ€è·¯ç”±é€‰æ‹©
- æ¨¡å—åŒ–ã€åŸºäºç»„ä»¶çš„è·¯ç”±é…ç½®
- è·¯ç”±å‚æ•°ã€æŸ¥è¯¢ã€é€šé…ç¬¦
- å±•ç¤ºç”± Vue çš„è¿‡æ¸¡ç³»ç»Ÿæä¾›çš„è¿‡æ¸¡æ•ˆæœ
- ç»†è‡´çš„å¯¼èˆªæ§åˆ¶
- è‡ªåŠ¨æ¿€æ´» CSS ç±»çš„é“¾æ¥
- HTML5 history æ¨¡å¼æˆ– hash æ¨¡å¼
- å¯å®šåˆ¶çš„æ»šåŠ¨è¡Œä¸º
- URL çš„æ­£ç¡®ç¼–ç 

ä¸å½“å‰å¤§éƒ¨åˆ†æµè¡Œçš„æ¡†æ¶æˆ–æ’ä»¶çš„ä½¿ç”¨æ–¹å¼ç›¸åŒï¼ŒVue-Router çš„å®‰è£…ä¹Ÿæœ‰ CDN å’Œ NPM ä¸¤ç§ä¸»æµæ–¹å¼ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š

#### CDN å¼•å…¥

[Unpkg.com](https://unpkg.com/) æä¾›äº†åŸºäº npm çš„ CDN é“¾æ¥ã€‚

```bash
https://unpkg.com/vue-router@2.0.0/dist/vue-router.js
```

#### NPM å®‰è£…

æˆ‘ä»¬å¯ä»¥åœ¨é¡¹ç›®æ–‡ä»¶å¤¹ä¸‹ç›´æ¥è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥å®‰è£… Vue-Routerã€‚

```bash
npm install vue-router@4
```

å®‰è£…å®Œæˆåï¼Œæˆ‘ä»¬è¿˜éœ€é€šè¿‡ç®€å•é…ç½®å°† Vue-Router ä¸ Vue å®ä¾‹è”ç³»åœ¨ä¸€èµ·ã€‚

> æœ¬èŠ‚å®éªŒä¸­æˆ‘ä»¬ä½¿ç”¨ CDN çš„æ–¹å¼æ¥å­¦ä¹ ã€‚

## Vue-Router çš„åŸºæœ¬ä½¿ç”¨

æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå•é¡µé¢åº”ç”¨æ¥çœ‹çœ‹ Vue-Router çš„ä½¿ç”¨ï¼Œå…¶åŸºæœ¬æ­¥éª¤å¦‚ä¸‹æ‰€ç¤ºï¼š

- ä½¿ç”¨ `router-link` ç»„ä»¶æ¥å¯¼èˆªï¼Œå…¶é€šè¿‡ `to` å±æ€§æ¥æŒ‡å®šè·³è½¬é“¾æ¥ï¼ˆè¿™ç›¸å½“äº HTML ä¸­çš„ a æ ‡ç­¾ï¼‰ã€‚
- ä½¿ç”¨ `router-view` ç»„ä»¶å®šä¹‰è·¯ç”±å‡ºå£ï¼Œè·¯ç”±åŒ¹é…åˆ°çš„ç»„ä»¶å°†ä¼šæ¸²æŸ“åˆ°æ­¤å¤„ã€‚
- ä½¿ç”¨ `const routes = [{ path, component }]` æ¥å®šä¹‰è·¯ç”±ï¼ˆè·¯å¾„å’Œç»„ä»¶åï¼‰ã€‚
- ä½¿ç”¨ `const router = new VueRouter({})` æ¥åˆ›å»ºè·¯ç”±å®ä¾‹ï¼Œåœ¨å…¶ä¸­ä¼ å…¥ä¸Šä¸€æ­¥å®šä¹‰çš„è·¯ç”±é…ç½® `routes`ã€‚
- åˆ›å»ºå’ŒæŒ‚è½½æ ¹å®ä¾‹ï¼Œåœ¨ `new Vue` ä¸­æŒ‚è½½ä¸Šä¸€æ­¥åˆ›å»ºçš„è·¯ç”±å®ä¾‹ `router`ã€‚

æ­¥éª¤æ¸…æ¥šäº†ï¼Œæˆ‘ä»¬æ¥ä¸¾ä¸ªä¾‹å­å§ï½

ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è·å– Vue å’Œ Vue-Router æ–‡ä»¶ã€‚

```bash
wget https://labfile.oss.aliyuncs.com/courses/1262/vue.min.js
wget https://labfile.oss.aliyuncs.com/courses/10532/vue-router.js
```

æ–°å»ºä¸€ä¸ª `index.html` æ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶ä¸­å†™å…¥ä»¥ä¸‹å†…å®¹ï¼š

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="vue.min.js"></script>
    <script src="vue-router.js"></script>
  </head>

  <body>
    <div id="app">
      <h1>è·¯ç”±çš„ä½¿ç”¨</h1>
      <p>
        <!-- ä½¿ç”¨ router-link ç»„ä»¶æ¥å¯¼èˆª -->
        <router-link to="/home">é¦–é¡µ</router-link>
        <router-link to="/hot">çƒ­é—¨</router-link>
        <router-link to="/class">åˆ†ç±»</router-link>
      </p>
      <!-- è·¯ç”±å‡ºå£ -->
      <!-- è·¯ç”±åŒ¹é…åˆ°çš„ç»„ä»¶å°†æ¸²æŸ“åœ¨è¿™é‡Œ -->
      <router-view></router-view>
    </div>
    <script>
      const Home = { template: "<div>é¦–é¡µ</div>" };
      const Hot = { template: "<div>çƒ­é—¨</div>" };
      const Class = { template: "<div>åˆ†ç±»</div>" };

      // å®šä¹‰è·¯ç”±
      const routes = [
        { path: "/home", component: Home },
        { path: "/hot", component: Hot },
        { path: "/class", component: Class },
      ];

      // åˆ›å»º router å®ä¾‹ï¼Œç„¶åä¼  routes é…ç½®
      const router = new VueRouter({
        routes,
      });

      // åˆ›å»ºå’ŒæŒ‚è½½æ ¹å®ä¾‹
      const app = new Vue({
        router,
      }).$mount("#app");
    </script>
  </body>
</html>
```

æ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/10532/1347963/c60ce628cc702cc13e22bfb688fbf9e0-0)

## å®éªŒæ€»ç»“

æœ¬èŠ‚å®éªŒå…ˆç»™å¤§å®¶ä»‹ç»äº†å‰ç«¯è·¯ç”±çš„æ¦‚å¿µï¼Œç„¶åç»™å¤§å®¶è®²è§£äº†è·¯ç”±å®‰è£…çš„ä¸¤ç§æ–¹å¼ï¼Œæœ€åæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•çš„è·¯ç”±ç¤ºä¾‹ä¸ºå¤§å®¶æ¼”ç¤ºäº†è·¯ç”±çš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•ã€‚

å®éªŒåªæ˜¯å¼•å¯¼å¤§å®¶å»å­¦ä¹ è·¯ç”±ï¼Œå…³äºè·¯ç”±çš„æ›´å¤šçŸ¥è¯†ï¼Œæ¨èå¤§å®¶ç›´æ¥é˜…è¯»[å®˜æ–¹æ–‡æ¡£](https://v3.router.vuejs.org/zh/installation.html)ã€‚